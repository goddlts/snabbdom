{"version":3,"sources":["snabbdom.js"],"names":["f","exports","module","define","amd","window","global","self","this","snabbdom","r","e","n","t","o","i","c","require","u","a","Error","code","p","call","length","1","Object","defineProperty","value","vnode_1","is","h","sel","b","children","text","data","undefined","array","primitive","vnode","addNS","ns","childData","default","./is","./vnode","2","htmlDomApi","createElement","tagName","document","createElementNS","namespaceURI","qualifiedName","createTextNode","createComment","insertBefore","parentNode","newNode","referenceNode","removeChild","node","child","appendChild","nextSibling","elm","setTextContent","textContent","getTextContent","isElement","nodeType","isText","isComment","3","Array","isArray","s","4","htmldomapi_1","isUndef","isDef","emptyNode","sameVnode","vnode1","vnode2","key","createKeyToOldIdx","beginIdx","endIdx","_a","map","hooks","h_1","thunk_1","thunk","init","modules","domApi","j","cbs","api","hook","push","createRmCb","childElm","listeners","parent_1","createElm","insertedVnodeQueue","_b","_c","init_1","hashIdx","indexOf","dotIdx","hash","dot","tag","slice","Math","min","setAttribute","replace","create","ch","insert","addVnodes","parentElm","before","vnodes","startIdx","invokeDestroyHook","_d","destroy","i_1","j_1","removeVnodes","rm","remove","i_2","removeHook","patchVnode","oldVnode","_e","_f","_g","_h","_j","_k","prepatch","oldCh","i_3","update","newCh","oldKeyToIdx","idxInOld","elmToMove","oldStartIdx","newStartIdx","oldEndIdx","oldStartVnode","oldEndVnode","newEndIdx","newStartVnode","newEndVnode","updateChildren","postpatch","parent","pre","isVnode","id","className","split","join","toLowerCase","emptyNodeAt","post","./h","./htmldomapi","./thunk","5","copyToThunk","fn","args","cur","apply","old","oldArgs","6"],"mappings":"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","file":"snabbdom.min.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.snabbdom = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar vnode_1 = require(\"./vnode\");\r\nvar is = require(\"./is\");\r\nfunction addNS(data, children, sel) {\r\n    data.ns = 'http://www.w3.org/2000/svg';\r\n    if (sel !== 'foreignObject' && children !== undefined) {\r\n        for (var i = 0; i < children.length; ++i) {\r\n            var childData = children[i].data;\r\n            if (childData !== undefined) {\r\n                addNS(childData, children[i].children, children[i].sel);\r\n            }\r\n        }\r\n    }\r\n}\r\nfunction h(sel, b, c) {\r\n    var data = {}, children, text, i;\r\n    if (c !== undefined) {\r\n        if (b !== null) {\r\n            data = b;\r\n        }\r\n        if (is.array(c)) {\r\n            children = c;\r\n        }\r\n        else if (is.primitive(c)) {\r\n            text = c;\r\n        }\r\n        else if (c && c.sel) {\r\n            children = [c];\r\n        }\r\n    }\r\n    else if (b !== undefined && b !== null) {\r\n        if (is.array(b)) {\r\n            children = b;\r\n        }\r\n        else if (is.primitive(b)) {\r\n            text = b;\r\n        }\r\n        else if (b && b.sel) {\r\n            children = [b];\r\n        }\r\n        else {\r\n            data = b;\r\n        }\r\n    }\r\n    if (children !== undefined) {\r\n        for (i = 0; i < children.length; ++i) {\r\n            if (is.primitive(children[i]))\r\n                children[i] = vnode_1.vnode(undefined, undefined, undefined, children[i], undefined);\r\n        }\r\n    }\r\n    if (sel[0] === 's' && sel[1] === 'v' && sel[2] === 'g' &&\r\n        (sel.length === 3 || sel[3] === '.' || sel[3] === '#')) {\r\n        addNS(data, children, sel);\r\n    }\r\n    return vnode_1.vnode(sel, data, children, text, undefined);\r\n}\r\nexports.h = h;\r\n;\r\nexports.default = h;\r\n\n},{\"./is\":3,\"./vnode\":6}],2:[function(require,module,exports){\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction createElement(tagName) {\r\n    return document.createElement(tagName);\r\n}\r\nfunction createElementNS(namespaceURI, qualifiedName) {\r\n    return document.createElementNS(namespaceURI, qualifiedName);\r\n}\r\nfunction createTextNode(text) {\r\n    return document.createTextNode(text);\r\n}\r\nfunction createComment(text) {\r\n    return document.createComment(text);\r\n}\r\nfunction insertBefore(parentNode, newNode, referenceNode) {\r\n    parentNode.insertBefore(newNode, referenceNode);\r\n}\r\nfunction removeChild(node, child) {\r\n    node.removeChild(child);\r\n}\r\nfunction appendChild(node, child) {\r\n    node.appendChild(child);\r\n}\r\nfunction parentNode(node) {\r\n    return node.parentNode;\r\n}\r\nfunction nextSibling(node) {\r\n    return node.nextSibling;\r\n}\r\nfunction tagName(elm) {\r\n    return elm.tagName;\r\n}\r\nfunction setTextContent(node, text) {\r\n    node.textContent = text;\r\n}\r\nfunction getTextContent(node) {\r\n    return node.textContent;\r\n}\r\nfunction isElement(node) {\r\n    return node.nodeType === 1;\r\n}\r\nfunction isText(node) {\r\n    return node.nodeType === 3;\r\n}\r\nfunction isComment(node) {\r\n    return node.nodeType === 8;\r\n}\r\nexports.htmlDomApi = {\r\n    createElement: createElement,\r\n    createElementNS: createElementNS,\r\n    createTextNode: createTextNode,\r\n    createComment: createComment,\r\n    insertBefore: insertBefore,\r\n    removeChild: removeChild,\r\n    appendChild: appendChild,\r\n    parentNode: parentNode,\r\n    nextSibling: nextSibling,\r\n    tagName: tagName,\r\n    setTextContent: setTextContent,\r\n    getTextContent: getTextContent,\r\n    isElement: isElement,\r\n    isText: isText,\r\n    isComment: isComment,\r\n};\r\nexports.default = exports.htmlDomApi;\r\n\n},{}],3:[function(require,module,exports){\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.array = Array.isArray;\r\nfunction primitive(s) {\r\n    return typeof s === 'string' || typeof s === 'number';\r\n}\r\nexports.primitive = primitive;\r\n\n},{}],4:[function(require,module,exports){\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar vnode_1 = require(\"./vnode\");\r\nvar is = require(\"./is\");\r\nvar htmldomapi_1 = require(\"./htmldomapi\");\r\nfunction isUndef(s) { return s === undefined; }\r\nfunction isDef(s) { return s !== undefined; }\r\nvar emptyNode = vnode_1.default('', {}, [], undefined, undefined);\r\nfunction sameVnode(vnode1, vnode2) {\r\n    return vnode1.key === vnode2.key && vnode1.sel === vnode2.sel;\r\n}\r\nfunction isVnode(vnode) {\r\n    return vnode.sel !== undefined;\r\n}\r\nfunction createKeyToOldIdx(children, beginIdx, endIdx) {\r\n    var _a;\r\n    var map = {};\r\n    for (var i = beginIdx; i <= endIdx; ++i) {\r\n        var key = (_a = children[i]) === null || _a === void 0 ? void 0 : _a.key;\r\n        if (key !== undefined) {\r\n            map[key] = i;\r\n        }\r\n    }\r\n    return map;\r\n}\r\nvar hooks = ['create', 'update', 'remove', 'destroy', 'pre', 'post'];\r\nvar h_1 = require(\"./h\");\r\nexports.h = h_1.h;\r\nvar thunk_1 = require(\"./thunk\");\r\nexports.thunk = thunk_1.thunk;\r\nfunction init(modules, domApi) {\r\n    var i, j, cbs = {};\r\n    var api = domApi !== undefined ? domApi : htmldomapi_1.default;\r\n    for (i = 0; i < hooks.length; ++i) {\r\n        cbs[hooks[i]] = [];\r\n        for (j = 0; j < modules.length; ++j) {\r\n            var hook = modules[j][hooks[i]];\r\n            if (hook !== undefined) {\r\n                cbs[hooks[i]].push(hook);\r\n            }\r\n        }\r\n    }\r\n    function emptyNodeAt(elm) {\r\n        var id = elm.id ? '#' + elm.id : '';\r\n        var c = elm.className ? '.' + elm.className.split(' ').join('.') : '';\r\n        return vnode_1.default(api.tagName(elm).toLowerCase() + id + c, {}, [], undefined, elm);\r\n    }\r\n    function createRmCb(childElm, listeners) {\r\n        return function rmCb() {\r\n            if (--listeners === 0) {\r\n                var parent_1 = api.parentNode(childElm);\r\n                api.removeChild(parent_1, childElm);\r\n            }\r\n        };\r\n    }\r\n    function createElm(vnode, insertedVnodeQueue) {\r\n        var _a, _b, _c;\r\n        var i, data = vnode.data;\r\n        if (data !== undefined) {\r\n            var init_1 = (_a = data.hook) === null || _a === void 0 ? void 0 : _a.init;\r\n            if (isDef(init_1)) {\r\n                init_1(vnode);\r\n                data = vnode.data;\r\n            }\r\n        }\r\n        var children = vnode.children, sel = vnode.sel;\r\n        if (sel === '!') {\r\n            if (isUndef(vnode.text)) {\r\n                vnode.text = '';\r\n            }\r\n            vnode.elm = api.createComment(vnode.text);\r\n        }\r\n        else if (sel !== undefined) {\r\n            // Parse selector\r\n            var hashIdx = sel.indexOf('#');\r\n            var dotIdx = sel.indexOf('.', hashIdx);\r\n            var hash = hashIdx > 0 ? hashIdx : sel.length;\r\n            var dot = dotIdx > 0 ? dotIdx : sel.length;\r\n            var tag = hashIdx !== -1 || dotIdx !== -1 ? sel.slice(0, Math.min(hash, dot)) : sel;\r\n            var elm = vnode.elm = isDef(data) && isDef(i = data.ns)\r\n                ? api.createElementNS(i, tag)\r\n                : api.createElement(tag);\r\n            if (hash < dot)\r\n                elm.setAttribute('id', sel.slice(hash + 1, dot));\r\n            if (dotIdx > 0)\r\n                elm.setAttribute('class', sel.slice(dot + 1).replace(/\\./g, ' '));\r\n            for (i = 0; i < cbs.create.length; ++i)\r\n                cbs.create[i](emptyNode, vnode);\r\n            if (is.array(children)) {\r\n                for (i = 0; i < children.length; ++i) {\r\n                    var ch = children[i];\r\n                    if (ch != null) {\r\n                        api.appendChild(elm, createElm(ch, insertedVnodeQueue));\r\n                    }\r\n                }\r\n            }\r\n            else if (is.primitive(vnode.text)) {\r\n                api.appendChild(elm, api.createTextNode(vnode.text));\r\n            }\r\n            var hook = vnode.data.hook;\r\n            if (isDef(hook)) {\r\n                (_c = (_b = hook).create) === null || _c === void 0 ? void 0 : _c.call(_b, emptyNode, vnode);\r\n                if (hook.insert) {\r\n                    insertedVnodeQueue.push(vnode);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            vnode.elm = api.createTextNode(vnode.text);\r\n        }\r\n        return vnode.elm;\r\n    }\r\n    function addVnodes(parentElm, before, vnodes, startIdx, endIdx, insertedVnodeQueue) {\r\n        for (; startIdx <= endIdx; ++startIdx) {\r\n            var ch = vnodes[startIdx];\r\n            if (ch != null) {\r\n                api.insertBefore(parentElm, createElm(ch, insertedVnodeQueue), before);\r\n            }\r\n        }\r\n    }\r\n    function invokeDestroyHook(vnode) {\r\n        var _a, _b, _c, _d;\r\n        var data = vnode.data;\r\n        if (data !== undefined) {\r\n            (_d = (_b = (_a = data) === null || _a === void 0 ? void 0 : _a.hook) === null || _b === void 0 ? void 0 : (_c = _b).destroy) === null || _d === void 0 ? void 0 : _d.call(_c, vnode);\r\n            for (var i_1 = 0; i_1 < cbs.destroy.length; ++i_1)\r\n                cbs.destroy[i_1](vnode);\r\n            if (vnode.children !== undefined) {\r\n                for (var j_1 = 0; j_1 < vnode.children.length; ++j_1) {\r\n                    var child = vnode.children[j_1];\r\n                    if (child != null && typeof child !== \"string\") {\r\n                        invokeDestroyHook(child);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function removeVnodes(parentElm, vnodes, startIdx, endIdx) {\r\n        var _a, _b, _c;\r\n        for (; startIdx <= endIdx; ++startIdx) {\r\n            var listeners = void 0, rm = void 0, ch = vnodes[startIdx];\r\n            if (ch != null) {\r\n                if (isDef(ch.sel)) {\r\n                    invokeDestroyHook(ch);\r\n                    listeners = cbs.remove.length + 1;\r\n                    rm = createRmCb(ch.elm, listeners);\r\n                    for (var i_2 = 0; i_2 < cbs.remove.length; ++i_2)\r\n                        cbs.remove[i_2](ch, rm);\r\n                    var removeHook = (_c = (_b = (_a = ch) === null || _a === void 0 ? void 0 : _a.data) === null || _b === void 0 ? void 0 : _b.hook) === null || _c === void 0 ? void 0 : _c.remove;\r\n                    if (isDef(removeHook)) {\r\n                        removeHook(ch, rm);\r\n                    }\r\n                    else {\r\n                        rm();\r\n                    }\r\n                }\r\n                else { // Text node\r\n                    api.removeChild(parentElm, ch.elm);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function updateChildren(parentElm, oldCh, newCh, insertedVnodeQueue) {\r\n        var oldStartIdx = 0, newStartIdx = 0;\r\n        var oldEndIdx = oldCh.length - 1;\r\n        var oldStartVnode = oldCh[0];\r\n        var oldEndVnode = oldCh[oldEndIdx];\r\n        var newEndIdx = newCh.length - 1;\r\n        var newStartVnode = newCh[0];\r\n        var newEndVnode = newCh[newEndIdx];\r\n        var oldKeyToIdx;\r\n        var idxInOld;\r\n        var elmToMove;\r\n        var before;\r\n        while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\r\n            if (oldStartVnode == null) {\r\n                oldStartVnode = oldCh[++oldStartIdx]; // Vnode might have been moved left\r\n            }\r\n            else if (oldEndVnode == null) {\r\n                oldEndVnode = oldCh[--oldEndIdx];\r\n            }\r\n            else if (newStartVnode == null) {\r\n                newStartVnode = newCh[++newStartIdx];\r\n            }\r\n            else if (newEndVnode == null) {\r\n                newEndVnode = newCh[--newEndIdx];\r\n            }\r\n            else if (sameVnode(oldStartVnode, newStartVnode)) {\r\n                patchVnode(oldStartVnode, newStartVnode, insertedVnodeQueue);\r\n                oldStartVnode = oldCh[++oldStartIdx];\r\n                newStartVnode = newCh[++newStartIdx];\r\n            }\r\n            else if (sameVnode(oldEndVnode, newEndVnode)) {\r\n                patchVnode(oldEndVnode, newEndVnode, insertedVnodeQueue);\r\n                oldEndVnode = oldCh[--oldEndIdx];\r\n                newEndVnode = newCh[--newEndIdx];\r\n            }\r\n            else if (sameVnode(oldStartVnode, newEndVnode)) { // Vnode moved right\r\n                patchVnode(oldStartVnode, newEndVnode, insertedVnodeQueue);\r\n                api.insertBefore(parentElm, oldStartVnode.elm, api.nextSibling(oldEndVnode.elm));\r\n                oldStartVnode = oldCh[++oldStartIdx];\r\n                newEndVnode = newCh[--newEndIdx];\r\n            }\r\n            else if (sameVnode(oldEndVnode, newStartVnode)) { // Vnode moved left\r\n                patchVnode(oldEndVnode, newStartVnode, insertedVnodeQueue);\r\n                api.insertBefore(parentElm, oldEndVnode.elm, oldStartVnode.elm);\r\n                oldEndVnode = oldCh[--oldEndIdx];\r\n                newStartVnode = newCh[++newStartIdx];\r\n            }\r\n            else {\r\n                if (oldKeyToIdx === undefined) {\r\n                    oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx);\r\n                }\r\n                idxInOld = oldKeyToIdx[newStartVnode.key];\r\n                if (isUndef(idxInOld)) { // New element\r\n                    api.insertBefore(parentElm, createElm(newStartVnode, insertedVnodeQueue), oldStartVnode.elm);\r\n                    newStartVnode = newCh[++newStartIdx];\r\n                }\r\n                else {\r\n                    elmToMove = oldCh[idxInOld];\r\n                    if (elmToMove.sel !== newStartVnode.sel) {\r\n                        api.insertBefore(parentElm, createElm(newStartVnode, insertedVnodeQueue), oldStartVnode.elm);\r\n                    }\r\n                    else {\r\n                        patchVnode(elmToMove, newStartVnode, insertedVnodeQueue);\r\n                        oldCh[idxInOld] = undefined;\r\n                        api.insertBefore(parentElm, elmToMove.elm, oldStartVnode.elm);\r\n                    }\r\n                    newStartVnode = newCh[++newStartIdx];\r\n                }\r\n            }\r\n        }\r\n        if (oldStartIdx <= oldEndIdx || newStartIdx <= newEndIdx) {\r\n            if (oldStartIdx > oldEndIdx) {\r\n                before = newCh[newEndIdx + 1] == null ? null : newCh[newEndIdx + 1].elm;\r\n                addVnodes(parentElm, before, newCh, newStartIdx, newEndIdx, insertedVnodeQueue);\r\n            }\r\n            else {\r\n                removeVnodes(parentElm, oldCh, oldStartIdx, oldEndIdx);\r\n            }\r\n        }\r\n    }\r\n    function patchVnode(oldVnode, vnode, insertedVnodeQueue) {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\r\n        var hook = (_a = vnode.data) === null || _a === void 0 ? void 0 : _a.hook;\r\n        (_d = (_b = hook) === null || _b === void 0 ? void 0 : (_c = _b).prepatch) === null || _d === void 0 ? void 0 : _d.call(_c, oldVnode, vnode);\r\n        var elm = vnode.elm = oldVnode.elm;\r\n        var oldCh = oldVnode.children;\r\n        var ch = vnode.children;\r\n        if (oldVnode === vnode)\r\n            return;\r\n        if (vnode.data !== undefined) {\r\n            for (var i_3 = 0; i_3 < cbs.update.length; ++i_3)\r\n                cbs.update[i_3](oldVnode, vnode);\r\n            (_g = (_e = vnode.data.hook) === null || _e === void 0 ? void 0 : (_f = _e).update) === null || _g === void 0 ? void 0 : _g.call(_f, oldVnode, vnode);\r\n        }\r\n        if (isUndef(vnode.text)) {\r\n            if (isDef(oldCh) && isDef(ch)) {\r\n                if (oldCh !== ch)\r\n                    updateChildren(elm, oldCh, ch, insertedVnodeQueue);\r\n            }\r\n            else if (isDef(ch)) {\r\n                if (isDef(oldVnode.text))\r\n                    api.setTextContent(elm, '');\r\n                addVnodes(elm, null, ch, 0, ch.length - 1, insertedVnodeQueue);\r\n            }\r\n            else if (isDef(oldCh)) {\r\n                removeVnodes(elm, oldCh, 0, oldCh.length - 1);\r\n            }\r\n            else if (isDef(oldVnode.text)) {\r\n                api.setTextContent(elm, '');\r\n            }\r\n        }\r\n        else if (oldVnode.text !== vnode.text) {\r\n            if (isDef(oldCh)) {\r\n                removeVnodes(elm, oldCh, 0, oldCh.length - 1);\r\n            }\r\n            api.setTextContent(elm, vnode.text);\r\n        }\r\n        (_k = (_h = hook) === null || _h === void 0 ? void 0 : (_j = _h).postpatch) === null || _k === void 0 ? void 0 : _k.call(_j, oldVnode, vnode);\r\n    }\r\n    return function patch(oldVnode, vnode) {\r\n        var i, elm, parent;\r\n        var insertedVnodeQueue = [];\r\n        for (i = 0; i < cbs.pre.length; ++i)\r\n            cbs.pre[i]();\r\n        if (!isVnode(oldVnode)) {\r\n            oldVnode = emptyNodeAt(oldVnode);\r\n        }\r\n        if (sameVnode(oldVnode, vnode)) {\r\n            patchVnode(oldVnode, vnode, insertedVnodeQueue);\r\n        }\r\n        else {\r\n            elm = oldVnode.elm;\r\n            parent = api.parentNode(elm);\r\n            createElm(vnode, insertedVnodeQueue);\r\n            if (parent !== null) {\r\n                api.insertBefore(parent, vnode.elm, api.nextSibling(elm));\r\n                removeVnodes(parent, [oldVnode], 0, 0);\r\n            }\r\n        }\r\n        for (i = 0; i < insertedVnodeQueue.length; ++i) {\r\n            insertedVnodeQueue[i].data.hook.insert(insertedVnodeQueue[i]);\r\n        }\r\n        for (i = 0; i < cbs.post.length; ++i)\r\n            cbs.post[i]();\r\n        return vnode;\r\n    };\r\n}\r\nexports.init = init;\r\n\n},{\"./h\":1,\"./htmldomapi\":2,\"./is\":3,\"./thunk\":5,\"./vnode\":6}],5:[function(require,module,exports){\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar h_1 = require(\"./h\");\r\nfunction copyToThunk(vnode, thunk) {\r\n    thunk.elm = vnode.elm;\r\n    vnode.data.fn = thunk.data.fn;\r\n    vnode.data.args = thunk.data.args;\r\n    thunk.data = vnode.data;\r\n    thunk.children = vnode.children;\r\n    thunk.text = vnode.text;\r\n    thunk.elm = vnode.elm;\r\n}\r\nfunction init(thunk) {\r\n    var cur = thunk.data;\r\n    var vnode = cur.fn.apply(undefined, cur.args);\r\n    copyToThunk(vnode, thunk);\r\n}\r\nfunction prepatch(oldVnode, thunk) {\r\n    var i, old = oldVnode.data, cur = thunk.data;\r\n    var oldArgs = old.args, args = cur.args;\r\n    if (old.fn !== cur.fn || oldArgs.length !== args.length) {\r\n        copyToThunk(cur.fn.apply(undefined, args), thunk);\r\n        return;\r\n    }\r\n    for (i = 0; i < args.length; ++i) {\r\n        if (oldArgs[i] !== args[i]) {\r\n            copyToThunk(cur.fn.apply(undefined, args), thunk);\r\n            return;\r\n        }\r\n    }\r\n    copyToThunk(oldVnode, thunk);\r\n}\r\nexports.thunk = function thunk(sel, key, fn, args) {\r\n    if (args === undefined) {\r\n        args = fn;\r\n        fn = key;\r\n        key = undefined;\r\n    }\r\n    return h_1.h(sel, {\r\n        key: key,\r\n        hook: { init: init, prepatch: prepatch },\r\n        fn: fn,\r\n        args: args\r\n    });\r\n};\r\nexports.default = exports.thunk;\r\n\n},{\"./h\":1}],6:[function(require,module,exports){\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction vnode(sel, data, children, text, elm) {\r\n    var key = data === undefined ? undefined : data.key;\r\n    return { sel: sel, data: data, children: children, text: text, elm: elm, key: key };\r\n}\r\nexports.vnode = vnode;\r\nexports.default = vnode;\r\n\n},{}]},{},[4])(4)\n});\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJoLmpzIiwiaHRtbGRvbWFwaS5qcyIsImlzLmpzIiwic25hYmJkb20uanMiLCJ0aHVuay5qcyIsInZub2RlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgdm5vZGVfMSA9IHJlcXVpcmUoXCIuL3Zub2RlXCIpO1xyXG52YXIgaXMgPSByZXF1aXJlKFwiLi9pc1wiKTtcclxuZnVuY3Rpb24gYWRkTlMoZGF0YSwgY2hpbGRyZW4sIHNlbCkge1xyXG4gICAgZGF0YS5ucyA9ICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc7XHJcbiAgICBpZiAoc2VsICE9PSAnZm9yZWlnbk9iamVjdCcgJiYgY2hpbGRyZW4gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgdmFyIGNoaWxkRGF0YSA9IGNoaWxkcmVuW2ldLmRhdGE7XHJcbiAgICAgICAgICAgIGlmIChjaGlsZERhdGEgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgYWRkTlMoY2hpbGREYXRhLCBjaGlsZHJlbltpXS5jaGlsZHJlbiwgY2hpbGRyZW5baV0uc2VsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBoKHNlbCwgYiwgYykge1xyXG4gICAgdmFyIGRhdGEgPSB7fSwgY2hpbGRyZW4sIHRleHQsIGk7XHJcbiAgICBpZiAoYyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgaWYgKGIgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgZGF0YSA9IGI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpcy5hcnJheShjKSkge1xyXG4gICAgICAgICAgICBjaGlsZHJlbiA9IGM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGlzLnByaW1pdGl2ZShjKSkge1xyXG4gICAgICAgICAgICB0ZXh0ID0gYztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyAmJiBjLnNlbCkge1xyXG4gICAgICAgICAgICBjaGlsZHJlbiA9IFtjXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChiICE9PSB1bmRlZmluZWQgJiYgYiAhPT0gbnVsbCkge1xyXG4gICAgICAgIGlmIChpcy5hcnJheShiKSkge1xyXG4gICAgICAgICAgICBjaGlsZHJlbiA9IGI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGlzLnByaW1pdGl2ZShiKSkge1xyXG4gICAgICAgICAgICB0ZXh0ID0gYjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYiAmJiBiLnNlbCkge1xyXG4gICAgICAgICAgICBjaGlsZHJlbiA9IFtiXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGRhdGEgPSBiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChjaGlsZHJlbiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgIGlmIChpcy5wcmltaXRpdmUoY2hpbGRyZW5baV0pKVxyXG4gICAgICAgICAgICAgICAgY2hpbGRyZW5baV0gPSB2bm9kZV8xLnZub2RlKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNoaWxkcmVuW2ldLCB1bmRlZmluZWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChzZWxbMF0gPT09ICdzJyAmJiBzZWxbMV0gPT09ICd2JyAmJiBzZWxbMl0gPT09ICdnJyAmJlxyXG4gICAgICAgIChzZWwubGVuZ3RoID09PSAzIHx8IHNlbFszXSA9PT0gJy4nIHx8IHNlbFszXSA9PT0gJyMnKSkge1xyXG4gICAgICAgIGFkZE5TKGRhdGEsIGNoaWxkcmVuLCBzZWwpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZub2RlXzEudm5vZGUoc2VsLCBkYXRhLCBjaGlsZHJlbiwgdGV4dCwgdW5kZWZpbmVkKTtcclxufVxyXG5leHBvcnRzLmggPSBoO1xyXG47XHJcbmV4cG9ydHMuZGVmYXVsdCA9IGg7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWguanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZnVuY3Rpb24gY3JlYXRlRWxlbWVudCh0YWdOYW1lKSB7XHJcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTtcclxufVxyXG5mdW5jdGlvbiBjcmVhdGVFbGVtZW50TlMobmFtZXNwYWNlVVJJLCBxdWFsaWZpZWROYW1lKSB7XHJcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5hbWVzcGFjZVVSSSwgcXVhbGlmaWVkTmFtZSk7XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlVGV4dE5vZGUodGV4dCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRleHQpO1xyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZUNvbW1lbnQodGV4dCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQodGV4dCk7XHJcbn1cclxuZnVuY3Rpb24gaW5zZXJ0QmVmb3JlKHBhcmVudE5vZGUsIG5ld05vZGUsIHJlZmVyZW5jZU5vZGUpIHtcclxuICAgIHBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5ld05vZGUsIHJlZmVyZW5jZU5vZGUpO1xyXG59XHJcbmZ1bmN0aW9uIHJlbW92ZUNoaWxkKG5vZGUsIGNoaWxkKSB7XHJcbiAgICBub2RlLnJlbW92ZUNoaWxkKGNoaWxkKTtcclxufVxyXG5mdW5jdGlvbiBhcHBlbmRDaGlsZChub2RlLCBjaGlsZCkge1xyXG4gICAgbm9kZS5hcHBlbmRDaGlsZChjaGlsZCk7XHJcbn1cclxuZnVuY3Rpb24gcGFyZW50Tm9kZShub2RlKSB7XHJcbiAgICByZXR1cm4gbm9kZS5wYXJlbnROb2RlO1xyXG59XHJcbmZ1bmN0aW9uIG5leHRTaWJsaW5nKG5vZGUpIHtcclxuICAgIHJldHVybiBub2RlLm5leHRTaWJsaW5nO1xyXG59XHJcbmZ1bmN0aW9uIHRhZ05hbWUoZWxtKSB7XHJcbiAgICByZXR1cm4gZWxtLnRhZ05hbWU7XHJcbn1cclxuZnVuY3Rpb24gc2V0VGV4dENvbnRlbnQobm9kZSwgdGV4dCkge1xyXG4gICAgbm9kZS50ZXh0Q29udGVudCA9IHRleHQ7XHJcbn1cclxuZnVuY3Rpb24gZ2V0VGV4dENvbnRlbnQobm9kZSkge1xyXG4gICAgcmV0dXJuIG5vZGUudGV4dENvbnRlbnQ7XHJcbn1cclxuZnVuY3Rpb24gaXNFbGVtZW50KG5vZGUpIHtcclxuICAgIHJldHVybiBub2RlLm5vZGVUeXBlID09PSAxO1xyXG59XHJcbmZ1bmN0aW9uIGlzVGV4dChub2RlKSB7XHJcbiAgICByZXR1cm4gbm9kZS5ub2RlVHlwZSA9PT0gMztcclxufVxyXG5mdW5jdGlvbiBpc0NvbW1lbnQobm9kZSkge1xyXG4gICAgcmV0dXJuIG5vZGUubm9kZVR5cGUgPT09IDg7XHJcbn1cclxuZXhwb3J0cy5odG1sRG9tQXBpID0ge1xyXG4gICAgY3JlYXRlRWxlbWVudDogY3JlYXRlRWxlbWVudCxcclxuICAgIGNyZWF0ZUVsZW1lbnROUzogY3JlYXRlRWxlbWVudE5TLFxyXG4gICAgY3JlYXRlVGV4dE5vZGU6IGNyZWF0ZVRleHROb2RlLFxyXG4gICAgY3JlYXRlQ29tbWVudDogY3JlYXRlQ29tbWVudCxcclxuICAgIGluc2VydEJlZm9yZTogaW5zZXJ0QmVmb3JlLFxyXG4gICAgcmVtb3ZlQ2hpbGQ6IHJlbW92ZUNoaWxkLFxyXG4gICAgYXBwZW5kQ2hpbGQ6IGFwcGVuZENoaWxkLFxyXG4gICAgcGFyZW50Tm9kZTogcGFyZW50Tm9kZSxcclxuICAgIG5leHRTaWJsaW5nOiBuZXh0U2libGluZyxcclxuICAgIHRhZ05hbWU6IHRhZ05hbWUsXHJcbiAgICBzZXRUZXh0Q29udGVudDogc2V0VGV4dENvbnRlbnQsXHJcbiAgICBnZXRUZXh0Q29udGVudDogZ2V0VGV4dENvbnRlbnQsXHJcbiAgICBpc0VsZW1lbnQ6IGlzRWxlbWVudCxcclxuICAgIGlzVGV4dDogaXNUZXh0LFxyXG4gICAgaXNDb21tZW50OiBpc0NvbW1lbnQsXHJcbn07XHJcbmV4cG9ydHMuZGVmYXVsdCA9IGV4cG9ydHMuaHRtbERvbUFwaTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aHRtbGRvbWFwaS5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmFycmF5ID0gQXJyYXkuaXNBcnJheTtcclxuZnVuY3Rpb24gcHJpbWl0aXZlKHMpIHtcclxuICAgIHJldHVybiB0eXBlb2YgcyA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHMgPT09ICdudW1iZXInO1xyXG59XHJcbmV4cG9ydHMucHJpbWl0aXZlID0gcHJpbWl0aXZlO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pcy5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgdm5vZGVfMSA9IHJlcXVpcmUoXCIuL3Zub2RlXCIpO1xyXG52YXIgaXMgPSByZXF1aXJlKFwiLi9pc1wiKTtcclxudmFyIGh0bWxkb21hcGlfMSA9IHJlcXVpcmUoXCIuL2h0bWxkb21hcGlcIik7XHJcbmZ1bmN0aW9uIGlzVW5kZWYocykgeyByZXR1cm4gcyA9PT0gdW5kZWZpbmVkOyB9XHJcbmZ1bmN0aW9uIGlzRGVmKHMpIHsgcmV0dXJuIHMgIT09IHVuZGVmaW5lZDsgfVxyXG52YXIgZW1wdHlOb2RlID0gdm5vZGVfMS5kZWZhdWx0KCcnLCB7fSwgW10sIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTtcclxuZnVuY3Rpb24gc2FtZVZub2RlKHZub2RlMSwgdm5vZGUyKSB7XHJcbiAgICByZXR1cm4gdm5vZGUxLmtleSA9PT0gdm5vZGUyLmtleSAmJiB2bm9kZTEuc2VsID09PSB2bm9kZTIuc2VsO1xyXG59XHJcbmZ1bmN0aW9uIGlzVm5vZGUodm5vZGUpIHtcclxuICAgIHJldHVybiB2bm9kZS5zZWwgIT09IHVuZGVmaW5lZDtcclxufVxyXG5mdW5jdGlvbiBjcmVhdGVLZXlUb09sZElkeChjaGlsZHJlbiwgYmVnaW5JZHgsIGVuZElkeCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgdmFyIG1hcCA9IHt9O1xyXG4gICAgZm9yICh2YXIgaSA9IGJlZ2luSWR4OyBpIDw9IGVuZElkeDsgKytpKSB7XHJcbiAgICAgICAgdmFyIGtleSA9IChfYSA9IGNoaWxkcmVuW2ldKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eua2V5O1xyXG4gICAgICAgIGlmIChrZXkgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBtYXBba2V5XSA9IGk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG1hcDtcclxufVxyXG52YXIgaG9va3MgPSBbJ2NyZWF0ZScsICd1cGRhdGUnLCAncmVtb3ZlJywgJ2Rlc3Ryb3knLCAncHJlJywgJ3Bvc3QnXTtcclxudmFyIGhfMSA9IHJlcXVpcmUoXCIuL2hcIik7XHJcbmV4cG9ydHMuaCA9IGhfMS5oO1xyXG52YXIgdGh1bmtfMSA9IHJlcXVpcmUoXCIuL3RodW5rXCIpO1xyXG5leHBvcnRzLnRodW5rID0gdGh1bmtfMS50aHVuaztcclxuZnVuY3Rpb24gaW5pdChtb2R1bGVzLCBkb21BcGkpIHtcclxuICAgIHZhciBpLCBqLCBjYnMgPSB7fTtcclxuICAgIHZhciBhcGkgPSBkb21BcGkgIT09IHVuZGVmaW5lZCA/IGRvbUFwaSA6IGh0bWxkb21hcGlfMS5kZWZhdWx0O1xyXG4gICAgZm9yIChpID0gMDsgaSA8IGhvb2tzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgY2JzW2hvb2tzW2ldXSA9IFtdO1xyXG4gICAgICAgIGZvciAoaiA9IDA7IGogPCBtb2R1bGVzLmxlbmd0aDsgKytqKSB7XHJcbiAgICAgICAgICAgIHZhciBob29rID0gbW9kdWxlc1tqXVtob29rc1tpXV07XHJcbiAgICAgICAgICAgIGlmIChob29rICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGNic1tob29rc1tpXV0ucHVzaChob29rKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGVtcHR5Tm9kZUF0KGVsbSkge1xyXG4gICAgICAgIHZhciBpZCA9IGVsbS5pZCA/ICcjJyArIGVsbS5pZCA6ICcnO1xyXG4gICAgICAgIHZhciBjID0gZWxtLmNsYXNzTmFtZSA/ICcuJyArIGVsbS5jbGFzc05hbWUuc3BsaXQoJyAnKS5qb2luKCcuJykgOiAnJztcclxuICAgICAgICByZXR1cm4gdm5vZGVfMS5kZWZhdWx0KGFwaS50YWdOYW1lKGVsbSkudG9Mb3dlckNhc2UoKSArIGlkICsgYywge30sIFtdLCB1bmRlZmluZWQsIGVsbSk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBjcmVhdGVSbUNiKGNoaWxkRWxtLCBsaXN0ZW5lcnMpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gcm1DYigpIHtcclxuICAgICAgICAgICAgaWYgKC0tbGlzdGVuZXJzID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50XzEgPSBhcGkucGFyZW50Tm9kZShjaGlsZEVsbSk7XHJcbiAgICAgICAgICAgICAgICBhcGkucmVtb3ZlQ2hpbGQocGFyZW50XzEsIGNoaWxkRWxtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBjcmVhdGVFbG0odm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSkge1xyXG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xyXG4gICAgICAgIHZhciBpLCBkYXRhID0gdm5vZGUuZGF0YTtcclxuICAgICAgICBpZiAoZGF0YSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHZhciBpbml0XzEgPSAoX2EgPSBkYXRhLmhvb2spID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pbml0O1xyXG4gICAgICAgICAgICBpZiAoaXNEZWYoaW5pdF8xKSkge1xyXG4gICAgICAgICAgICAgICAgaW5pdF8xKHZub2RlKTtcclxuICAgICAgICAgICAgICAgIGRhdGEgPSB2bm9kZS5kYXRhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBjaGlsZHJlbiA9IHZub2RlLmNoaWxkcmVuLCBzZWwgPSB2bm9kZS5zZWw7XHJcbiAgICAgICAgaWYgKHNlbCA9PT0gJyEnKSB7XHJcbiAgICAgICAgICAgIGlmIChpc1VuZGVmKHZub2RlLnRleHQpKSB7XHJcbiAgICAgICAgICAgICAgICB2bm9kZS50ZXh0ID0gJyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdm5vZGUuZWxtID0gYXBpLmNyZWF0ZUNvbW1lbnQodm5vZGUudGV4dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHNlbCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIC8vIFBhcnNlIHNlbGVjdG9yXHJcbiAgICAgICAgICAgIHZhciBoYXNoSWR4ID0gc2VsLmluZGV4T2YoJyMnKTtcclxuICAgICAgICAgICAgdmFyIGRvdElkeCA9IHNlbC5pbmRleE9mKCcuJywgaGFzaElkeCk7XHJcbiAgICAgICAgICAgIHZhciBoYXNoID0gaGFzaElkeCA+IDAgPyBoYXNoSWR4IDogc2VsLmxlbmd0aDtcclxuICAgICAgICAgICAgdmFyIGRvdCA9IGRvdElkeCA+IDAgPyBkb3RJZHggOiBzZWwubGVuZ3RoO1xyXG4gICAgICAgICAgICB2YXIgdGFnID0gaGFzaElkeCAhPT0gLTEgfHwgZG90SWR4ICE9PSAtMSA/IHNlbC5zbGljZSgwLCBNYXRoLm1pbihoYXNoLCBkb3QpKSA6IHNlbDtcclxuICAgICAgICAgICAgdmFyIGVsbSA9IHZub2RlLmVsbSA9IGlzRGVmKGRhdGEpICYmIGlzRGVmKGkgPSBkYXRhLm5zKVxyXG4gICAgICAgICAgICAgICAgPyBhcGkuY3JlYXRlRWxlbWVudE5TKGksIHRhZylcclxuICAgICAgICAgICAgICAgIDogYXBpLmNyZWF0ZUVsZW1lbnQodGFnKTtcclxuICAgICAgICAgICAgaWYgKGhhc2ggPCBkb3QpXHJcbiAgICAgICAgICAgICAgICBlbG0uc2V0QXR0cmlidXRlKCdpZCcsIHNlbC5zbGljZShoYXNoICsgMSwgZG90KSk7XHJcbiAgICAgICAgICAgIGlmIChkb3RJZHggPiAwKVxyXG4gICAgICAgICAgICAgICAgZWxtLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBzZWwuc2xpY2UoZG90ICsgMSkucmVwbGFjZSgvXFwuL2csICcgJykpO1xyXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY2JzLmNyZWF0ZS5sZW5ndGg7ICsraSlcclxuICAgICAgICAgICAgICAgIGNicy5jcmVhdGVbaV0oZW1wdHlOb2RlLCB2bm9kZSk7XHJcbiAgICAgICAgICAgIGlmIChpcy5hcnJheShjaGlsZHJlbikpIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaCA9IGNoaWxkcmVuW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjaCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwaS5hcHBlbmRDaGlsZChlbG0sIGNyZWF0ZUVsbShjaCwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzLnByaW1pdGl2ZSh2bm9kZS50ZXh0KSkge1xyXG4gICAgICAgICAgICAgICAgYXBpLmFwcGVuZENoaWxkKGVsbSwgYXBpLmNyZWF0ZVRleHROb2RlKHZub2RlLnRleHQpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgaG9vayA9IHZub2RlLmRhdGEuaG9vaztcclxuICAgICAgICAgICAgaWYgKGlzRGVmKGhvb2spKSB7XHJcbiAgICAgICAgICAgICAgICAoX2MgPSAoX2IgPSBob29rKS5jcmVhdGUpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5jYWxsKF9iLCBlbXB0eU5vZGUsIHZub2RlKTtcclxuICAgICAgICAgICAgICAgIGlmIChob29rLmluc2VydCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGluc2VydGVkVm5vZGVRdWV1ZS5wdXNoKHZub2RlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdm5vZGUuZWxtID0gYXBpLmNyZWF0ZVRleHROb2RlKHZub2RlLnRleHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdm5vZGUuZWxtO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gYWRkVm5vZGVzKHBhcmVudEVsbSwgYmVmb3JlLCB2bm9kZXMsIHN0YXJ0SWR4LCBlbmRJZHgsIGluc2VydGVkVm5vZGVRdWV1ZSkge1xyXG4gICAgICAgIGZvciAoOyBzdGFydElkeCA8PSBlbmRJZHg7ICsrc3RhcnRJZHgpIHtcclxuICAgICAgICAgICAgdmFyIGNoID0gdm5vZGVzW3N0YXJ0SWR4XTtcclxuICAgICAgICAgICAgaWYgKGNoICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGFwaS5pbnNlcnRCZWZvcmUocGFyZW50RWxtLCBjcmVhdGVFbG0oY2gsIGluc2VydGVkVm5vZGVRdWV1ZSksIGJlZm9yZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBpbnZva2VEZXN0cm95SG9vayh2bm9kZSkge1xyXG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcclxuICAgICAgICB2YXIgZGF0YSA9IHZub2RlLmRhdGE7XHJcbiAgICAgICAgaWYgKGRhdGEgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAoX2QgPSAoX2IgPSAoX2EgPSBkYXRhKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaG9vaykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfYyA9IF9iKS5kZXN0cm95KSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QuY2FsbChfYywgdm5vZGUpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpXzEgPSAwOyBpXzEgPCBjYnMuZGVzdHJveS5sZW5ndGg7ICsraV8xKVxyXG4gICAgICAgICAgICAgICAgY2JzLmRlc3Ryb3lbaV8xXSh2bm9kZSk7XHJcbiAgICAgICAgICAgIGlmICh2bm9kZS5jaGlsZHJlbiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqXzEgPSAwOyBqXzEgPCB2bm9kZS5jaGlsZHJlbi5sZW5ndGg7ICsral8xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0gdm5vZGUuY2hpbGRyZW5bal8xXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGQgIT0gbnVsbCAmJiB0eXBlb2YgY2hpbGQgIT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW52b2tlRGVzdHJveUhvb2soY2hpbGQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJlbW92ZVZub2RlcyhwYXJlbnRFbG0sIHZub2Rlcywgc3RhcnRJZHgsIGVuZElkeCkge1xyXG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xyXG4gICAgICAgIGZvciAoOyBzdGFydElkeCA8PSBlbmRJZHg7ICsrc3RhcnRJZHgpIHtcclxuICAgICAgICAgICAgdmFyIGxpc3RlbmVycyA9IHZvaWQgMCwgcm0gPSB2b2lkIDAsIGNoID0gdm5vZGVzW3N0YXJ0SWR4XTtcclxuICAgICAgICAgICAgaWYgKGNoICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpc0RlZihjaC5zZWwpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW52b2tlRGVzdHJveUhvb2soY2gpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVycyA9IGNicy5yZW1vdmUubGVuZ3RoICsgMTtcclxuICAgICAgICAgICAgICAgICAgICBybSA9IGNyZWF0ZVJtQ2IoY2guZWxtLCBsaXN0ZW5lcnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGlfMiA9IDA7IGlfMiA8IGNicy5yZW1vdmUubGVuZ3RoOyArK2lfMilcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2JzLnJlbW92ZVtpXzJdKGNoLCBybSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlbW92ZUhvb2sgPSAoX2MgPSAoX2IgPSAoX2EgPSBjaCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmRhdGEpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5ob29rKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MucmVtb3ZlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0RlZihyZW1vdmVIb29rKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVIb29rKGNoLCBybSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBybSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBUZXh0IG5vZGVcclxuICAgICAgICAgICAgICAgICAgICBhcGkucmVtb3ZlQ2hpbGQocGFyZW50RWxtLCBjaC5lbG0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gdXBkYXRlQ2hpbGRyZW4ocGFyZW50RWxtLCBvbGRDaCwgbmV3Q2gsIGluc2VydGVkVm5vZGVRdWV1ZSkge1xyXG4gICAgICAgIHZhciBvbGRTdGFydElkeCA9IDAsIG5ld1N0YXJ0SWR4ID0gMDtcclxuICAgICAgICB2YXIgb2xkRW5kSWR4ID0gb2xkQ2gubGVuZ3RoIC0gMTtcclxuICAgICAgICB2YXIgb2xkU3RhcnRWbm9kZSA9IG9sZENoWzBdO1xyXG4gICAgICAgIHZhciBvbGRFbmRWbm9kZSA9IG9sZENoW29sZEVuZElkeF07XHJcbiAgICAgICAgdmFyIG5ld0VuZElkeCA9IG5ld0NoLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgdmFyIG5ld1N0YXJ0Vm5vZGUgPSBuZXdDaFswXTtcclxuICAgICAgICB2YXIgbmV3RW5kVm5vZGUgPSBuZXdDaFtuZXdFbmRJZHhdO1xyXG4gICAgICAgIHZhciBvbGRLZXlUb0lkeDtcclxuICAgICAgICB2YXIgaWR4SW5PbGQ7XHJcbiAgICAgICAgdmFyIGVsbVRvTW92ZTtcclxuICAgICAgICB2YXIgYmVmb3JlO1xyXG4gICAgICAgIHdoaWxlIChvbGRTdGFydElkeCA8PSBvbGRFbmRJZHggJiYgbmV3U3RhcnRJZHggPD0gbmV3RW5kSWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChvbGRTdGFydFZub2RlID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIG9sZFN0YXJ0Vm5vZGUgPSBvbGRDaFsrK29sZFN0YXJ0SWR4XTsgLy8gVm5vZGUgbWlnaHQgaGF2ZSBiZWVuIG1vdmVkIGxlZnRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChvbGRFbmRWbm9kZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBvbGRFbmRWbm9kZSA9IG9sZENoWy0tb2xkRW5kSWR4XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChuZXdTdGFydFZub2RlID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIG5ld1N0YXJ0Vm5vZGUgPSBuZXdDaFsrK25ld1N0YXJ0SWR4XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChuZXdFbmRWbm9kZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBuZXdFbmRWbm9kZSA9IG5ld0NoWy0tbmV3RW5kSWR4XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChzYW1lVm5vZGUob2xkU3RhcnRWbm9kZSwgbmV3U3RhcnRWbm9kZSkpIHtcclxuICAgICAgICAgICAgICAgIHBhdGNoVm5vZGUob2xkU3RhcnRWbm9kZSwgbmV3U3RhcnRWbm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcclxuICAgICAgICAgICAgICAgIG9sZFN0YXJ0Vm5vZGUgPSBvbGRDaFsrK29sZFN0YXJ0SWR4XTtcclxuICAgICAgICAgICAgICAgIG5ld1N0YXJ0Vm5vZGUgPSBuZXdDaFsrK25ld1N0YXJ0SWR4XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChzYW1lVm5vZGUob2xkRW5kVm5vZGUsIG5ld0VuZFZub2RlKSkge1xyXG4gICAgICAgICAgICAgICAgcGF0Y2hWbm9kZShvbGRFbmRWbm9kZSwgbmV3RW5kVm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSk7XHJcbiAgICAgICAgICAgICAgICBvbGRFbmRWbm9kZSA9IG9sZENoWy0tb2xkRW5kSWR4XTtcclxuICAgICAgICAgICAgICAgIG5ld0VuZFZub2RlID0gbmV3Q2hbLS1uZXdFbmRJZHhdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHNhbWVWbm9kZShvbGRTdGFydFZub2RlLCBuZXdFbmRWbm9kZSkpIHsgLy8gVm5vZGUgbW92ZWQgcmlnaHRcclxuICAgICAgICAgICAgICAgIHBhdGNoVm5vZGUob2xkU3RhcnRWbm9kZSwgbmV3RW5kVm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSk7XHJcbiAgICAgICAgICAgICAgICBhcGkuaW5zZXJ0QmVmb3JlKHBhcmVudEVsbSwgb2xkU3RhcnRWbm9kZS5lbG0sIGFwaS5uZXh0U2libGluZyhvbGRFbmRWbm9kZS5lbG0pKTtcclxuICAgICAgICAgICAgICAgIG9sZFN0YXJ0Vm5vZGUgPSBvbGRDaFsrK29sZFN0YXJ0SWR4XTtcclxuICAgICAgICAgICAgICAgIG5ld0VuZFZub2RlID0gbmV3Q2hbLS1uZXdFbmRJZHhdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHNhbWVWbm9kZShvbGRFbmRWbm9kZSwgbmV3U3RhcnRWbm9kZSkpIHsgLy8gVm5vZGUgbW92ZWQgbGVmdFxyXG4gICAgICAgICAgICAgICAgcGF0Y2hWbm9kZShvbGRFbmRWbm9kZSwgbmV3U3RhcnRWbm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcclxuICAgICAgICAgICAgICAgIGFwaS5pbnNlcnRCZWZvcmUocGFyZW50RWxtLCBvbGRFbmRWbm9kZS5lbG0sIG9sZFN0YXJ0Vm5vZGUuZWxtKTtcclxuICAgICAgICAgICAgICAgIG9sZEVuZFZub2RlID0gb2xkQ2hbLS1vbGRFbmRJZHhdO1xyXG4gICAgICAgICAgICAgICAgbmV3U3RhcnRWbm9kZSA9IG5ld0NoWysrbmV3U3RhcnRJZHhdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9sZEtleVRvSWR4ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBvbGRLZXlUb0lkeCA9IGNyZWF0ZUtleVRvT2xkSWR4KG9sZENoLCBvbGRTdGFydElkeCwgb2xkRW5kSWR4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlkeEluT2xkID0gb2xkS2V5VG9JZHhbbmV3U3RhcnRWbm9kZS5rZXldO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzVW5kZWYoaWR4SW5PbGQpKSB7IC8vIE5ldyBlbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgYXBpLmluc2VydEJlZm9yZShwYXJlbnRFbG0sIGNyZWF0ZUVsbShuZXdTdGFydFZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpLCBvbGRTdGFydFZub2RlLmVsbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3U3RhcnRWbm9kZSA9IG5ld0NoWysrbmV3U3RhcnRJZHhdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxtVG9Nb3ZlID0gb2xkQ2hbaWR4SW5PbGRdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbG1Ub01vdmUuc2VsICE9PSBuZXdTdGFydFZub2RlLnNlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcGkuaW5zZXJ0QmVmb3JlKHBhcmVudEVsbSwgY3JlYXRlRWxtKG5ld1N0YXJ0Vm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSksIG9sZFN0YXJ0Vm5vZGUuZWxtKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGNoVm5vZGUoZWxtVG9Nb3ZlLCBuZXdTdGFydFZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRDaFtpZHhJbk9sZF0gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwaS5pbnNlcnRCZWZvcmUocGFyZW50RWxtLCBlbG1Ub01vdmUuZWxtLCBvbGRTdGFydFZub2RlLmVsbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIG5ld1N0YXJ0Vm5vZGUgPSBuZXdDaFsrK25ld1N0YXJ0SWR4XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2xkU3RhcnRJZHggPD0gb2xkRW5kSWR4IHx8IG5ld1N0YXJ0SWR4IDw9IG5ld0VuZElkeCkge1xyXG4gICAgICAgICAgICBpZiAob2xkU3RhcnRJZHggPiBvbGRFbmRJZHgpIHtcclxuICAgICAgICAgICAgICAgIGJlZm9yZSA9IG5ld0NoW25ld0VuZElkeCArIDFdID09IG51bGwgPyBudWxsIDogbmV3Q2hbbmV3RW5kSWR4ICsgMV0uZWxtO1xyXG4gICAgICAgICAgICAgICAgYWRkVm5vZGVzKHBhcmVudEVsbSwgYmVmb3JlLCBuZXdDaCwgbmV3U3RhcnRJZHgsIG5ld0VuZElkeCwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlbW92ZVZub2RlcyhwYXJlbnRFbG0sIG9sZENoLCBvbGRTdGFydElkeCwgb2xkRW5kSWR4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHBhdGNoVm5vZGUob2xkVm5vZGUsIHZub2RlLCBpbnNlcnRlZFZub2RlUXVldWUpIHtcclxuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oLCBfaiwgX2s7XHJcbiAgICAgICAgdmFyIGhvb2sgPSAoX2EgPSB2bm9kZS5kYXRhKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaG9vaztcclxuICAgICAgICAoX2QgPSAoX2IgPSBob29rKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9jID0gX2IpLnByZXBhdGNoKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QuY2FsbChfYywgb2xkVm5vZGUsIHZub2RlKTtcclxuICAgICAgICB2YXIgZWxtID0gdm5vZGUuZWxtID0gb2xkVm5vZGUuZWxtO1xyXG4gICAgICAgIHZhciBvbGRDaCA9IG9sZFZub2RlLmNoaWxkcmVuO1xyXG4gICAgICAgIHZhciBjaCA9IHZub2RlLmNoaWxkcmVuO1xyXG4gICAgICAgIGlmIChvbGRWbm9kZSA9PT0gdm5vZGUpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBpZiAodm5vZGUuZGF0YSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGlfMyA9IDA7IGlfMyA8IGNicy51cGRhdGUubGVuZ3RoOyArK2lfMylcclxuICAgICAgICAgICAgICAgIGNicy51cGRhdGVbaV8zXShvbGRWbm9kZSwgdm5vZGUpO1xyXG4gICAgICAgICAgICAoX2cgPSAoX2UgPSB2bm9kZS5kYXRhLmhvb2spID09PSBudWxsIHx8IF9lID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2YgPSBfZSkudXBkYXRlKSA9PT0gbnVsbCB8fCBfZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2cuY2FsbChfZiwgb2xkVm5vZGUsIHZub2RlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzVW5kZWYodm5vZGUudGV4dCkpIHtcclxuICAgICAgICAgICAgaWYgKGlzRGVmKG9sZENoKSAmJiBpc0RlZihjaCkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvbGRDaCAhPT0gY2gpXHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlQ2hpbGRyZW4oZWxtLCBvbGRDaCwgY2gsIGluc2VydGVkVm5vZGVRdWV1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoaXNEZWYoY2gpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNEZWYob2xkVm5vZGUudGV4dCkpXHJcbiAgICAgICAgICAgICAgICAgICAgYXBpLnNldFRleHRDb250ZW50KGVsbSwgJycpO1xyXG4gICAgICAgICAgICAgICAgYWRkVm5vZGVzKGVsbSwgbnVsbCwgY2gsIDAsIGNoLmxlbmd0aCAtIDEsIGluc2VydGVkVm5vZGVRdWV1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoaXNEZWYob2xkQ2gpKSB7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVWbm9kZXMoZWxtLCBvbGRDaCwgMCwgb2xkQ2gubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoaXNEZWYob2xkVm5vZGUudGV4dCkpIHtcclxuICAgICAgICAgICAgICAgIGFwaS5zZXRUZXh0Q29udGVudChlbG0sICcnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChvbGRWbm9kZS50ZXh0ICE9PSB2bm9kZS50ZXh0KSB7XHJcbiAgICAgICAgICAgIGlmIChpc0RlZihvbGRDaCkpIHtcclxuICAgICAgICAgICAgICAgIHJlbW92ZVZub2RlcyhlbG0sIG9sZENoLCAwLCBvbGRDaC5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhcGkuc2V0VGV4dENvbnRlbnQoZWxtLCB2bm9kZS50ZXh0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgKF9rID0gKF9oID0gaG9vaykgPT09IG51bGwgfHwgX2ggPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfaiA9IF9oKS5wb3N0cGF0Y2gpID09PSBudWxsIHx8IF9rID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfay5jYWxsKF9qLCBvbGRWbm9kZSwgdm5vZGUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIHBhdGNoKG9sZFZub2RlLCB2bm9kZSkge1xyXG4gICAgICAgIHZhciBpLCBlbG0sIHBhcmVudDtcclxuICAgICAgICB2YXIgaW5zZXJ0ZWRWbm9kZVF1ZXVlID0gW107XHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGNicy5wcmUubGVuZ3RoOyArK2kpXHJcbiAgICAgICAgICAgIGNicy5wcmVbaV0oKTtcclxuICAgICAgICBpZiAoIWlzVm5vZGUob2xkVm5vZGUpKSB7XHJcbiAgICAgICAgICAgIG9sZFZub2RlID0gZW1wdHlOb2RlQXQob2xkVm5vZGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc2FtZVZub2RlKG9sZFZub2RlLCB2bm9kZSkpIHtcclxuICAgICAgICAgICAgcGF0Y2hWbm9kZShvbGRWbm9kZSwgdm5vZGUsIGluc2VydGVkVm5vZGVRdWV1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBlbG0gPSBvbGRWbm9kZS5lbG07XHJcbiAgICAgICAgICAgIHBhcmVudCA9IGFwaS5wYXJlbnROb2RlKGVsbSk7XHJcbiAgICAgICAgICAgIGNyZWF0ZUVsbSh2bm9kZSwgaW5zZXJ0ZWRWbm9kZVF1ZXVlKTtcclxuICAgICAgICAgICAgaWYgKHBhcmVudCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgYXBpLmluc2VydEJlZm9yZShwYXJlbnQsIHZub2RlLmVsbSwgYXBpLm5leHRTaWJsaW5nKGVsbSkpO1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlVm5vZGVzKHBhcmVudCwgW29sZFZub2RlXSwgMCwgMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGluc2VydGVkVm5vZGVRdWV1ZS5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICBpbnNlcnRlZFZub2RlUXVldWVbaV0uZGF0YS5ob29rLmluc2VydChpbnNlcnRlZFZub2RlUXVldWVbaV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY2JzLnBvc3QubGVuZ3RoOyArK2kpXHJcbiAgICAgICAgICAgIGNicy5wb3N0W2ldKCk7XHJcbiAgICAgICAgcmV0dXJuIHZub2RlO1xyXG4gICAgfTtcclxufVxyXG5leHBvcnRzLmluaXQgPSBpbml0O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1zbmFiYmRvbS5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgaF8xID0gcmVxdWlyZShcIi4vaFwiKTtcclxuZnVuY3Rpb24gY29weVRvVGh1bmsodm5vZGUsIHRodW5rKSB7XHJcbiAgICB0aHVuay5lbG0gPSB2bm9kZS5lbG07XHJcbiAgICB2bm9kZS5kYXRhLmZuID0gdGh1bmsuZGF0YS5mbjtcclxuICAgIHZub2RlLmRhdGEuYXJncyA9IHRodW5rLmRhdGEuYXJncztcclxuICAgIHRodW5rLmRhdGEgPSB2bm9kZS5kYXRhO1xyXG4gICAgdGh1bmsuY2hpbGRyZW4gPSB2bm9kZS5jaGlsZHJlbjtcclxuICAgIHRodW5rLnRleHQgPSB2bm9kZS50ZXh0O1xyXG4gICAgdGh1bmsuZWxtID0gdm5vZGUuZWxtO1xyXG59XHJcbmZ1bmN0aW9uIGluaXQodGh1bmspIHtcclxuICAgIHZhciBjdXIgPSB0aHVuay5kYXRhO1xyXG4gICAgdmFyIHZub2RlID0gY3VyLmZuLmFwcGx5KHVuZGVmaW5lZCwgY3VyLmFyZ3MpO1xyXG4gICAgY29weVRvVGh1bmsodm5vZGUsIHRodW5rKTtcclxufVxyXG5mdW5jdGlvbiBwcmVwYXRjaChvbGRWbm9kZSwgdGh1bmspIHtcclxuICAgIHZhciBpLCBvbGQgPSBvbGRWbm9kZS5kYXRhLCBjdXIgPSB0aHVuay5kYXRhO1xyXG4gICAgdmFyIG9sZEFyZ3MgPSBvbGQuYXJncywgYXJncyA9IGN1ci5hcmdzO1xyXG4gICAgaWYgKG9sZC5mbiAhPT0gY3VyLmZuIHx8IG9sZEFyZ3MubGVuZ3RoICE9PSBhcmdzLmxlbmd0aCkge1xyXG4gICAgICAgIGNvcHlUb1RodW5rKGN1ci5mbi5hcHBseSh1bmRlZmluZWQsIGFyZ3MpLCB0aHVuayk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgZm9yIChpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICBpZiAob2xkQXJnc1tpXSAhPT0gYXJnc1tpXSkge1xyXG4gICAgICAgICAgICBjb3B5VG9UaHVuayhjdXIuZm4uYXBwbHkodW5kZWZpbmVkLCBhcmdzKSwgdGh1bmspO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29weVRvVGh1bmsob2xkVm5vZGUsIHRodW5rKTtcclxufVxyXG5leHBvcnRzLnRodW5rID0gZnVuY3Rpb24gdGh1bmsoc2VsLCBrZXksIGZuLCBhcmdzKSB7XHJcbiAgICBpZiAoYXJncyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgYXJncyA9IGZuO1xyXG4gICAgICAgIGZuID0ga2V5O1xyXG4gICAgICAgIGtleSA9IHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIHJldHVybiBoXzEuaChzZWwsIHtcclxuICAgICAgICBrZXk6IGtleSxcclxuICAgICAgICBob29rOiB7IGluaXQ6IGluaXQsIHByZXBhdGNoOiBwcmVwYXRjaCB9LFxyXG4gICAgICAgIGZuOiBmbixcclxuICAgICAgICBhcmdzOiBhcmdzXHJcbiAgICB9KTtcclxufTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gZXhwb3J0cy50aHVuaztcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGh1bmsuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZnVuY3Rpb24gdm5vZGUoc2VsLCBkYXRhLCBjaGlsZHJlbiwgdGV4dCwgZWxtKSB7XHJcbiAgICB2YXIga2V5ID0gZGF0YSA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogZGF0YS5rZXk7XHJcbiAgICByZXR1cm4geyBzZWw6IHNlbCwgZGF0YTogZGF0YSwgY2hpbGRyZW46IGNoaWxkcmVuLCB0ZXh0OiB0ZXh0LCBlbG06IGVsbSwga2V5OiBrZXkgfTtcclxufVxyXG5leHBvcnRzLnZub2RlID0gdm5vZGU7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IHZub2RlO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD12bm9kZS5qcy5tYXAiXX0=\n"]}